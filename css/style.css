/* =========================
   GLOBAL BACKGROUND + BASE
   ========================= */
body{
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background: linear-gradient(135deg,#050816,#0a1c3d,#1f3f88);
  color:white;
  text-align:center;
  overflow:hidden;
}

button{
  padding:12px 18px;
  border:none;
  border-radius:30px;
  background:#5c7cff;
  color:white;
  font-size:18px;
  cursor:pointer;
}

/* =========================
   QUESTION PAGE CENTERING
   ========================= */
.page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:18px;
  padding:28px 16px;
  box-sizing:border-box;
  position:relative;
  z-index:100; /* keep above quotes */
}

h2{
  max-width:820px;
  line-height:1.25;
  margin:0;
}

.choices{
  display:flex;
  flex-direction:column;
  gap:12px;
  width:min(520px, 92vw);
}

.photo{
  width:min(320px, 85vw);
  border-radius:20px;
  box-shadow:0 0 30px rgba(92,124,255,.35);
}

/* =========================
   INTRO OVERLAY + BURN
   ========================= */
#intro{
  position:fixed;
  inset:0;
  background: linear-gradient(135deg,#050816,#0a1c3d,#1f3f88);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}

.center{
  max-width:520px;
  padding:20px;
}

#intro.burn{
  animation: fadeOut 2.1s forwards;
}

@keyframes fadeOut{
  0% { opacity:1; }
  100% { opacity:0; }
}

#intro::before{
  content:"";
  position:absolute;
  inset:0;
  opacity:0;
  pointer-events:none;
}

#intro::after{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:20px;
  height:20px;
  transform:translate(-50%,-50%);
  border-radius:999px;
  opacity:0;
  pointer-events:none;
}

#intro.burn::before{
  opacity:1;
  background: radial-gradient(circle at center,
    transparent 0%,
    transparent var(--r, 0%),
    rgba(0,0,0,0.92) calc(var(--r, 0%) + 1%),
    rgba(0,0,0,0.98) 100%);
  animation: holeGrow 2s forwards;
}

#intro.burn::after{
  opacity:1;
  box-shadow:
    0 0 25px rgba(255,180,80,.95),
    0 0 55px rgba(255,120,40,.75),
    0 0 85px rgba(255,60,0,.55);
  animation: ringGrow 2s forwards;
}

@keyframes holeGrow{
  0%   { --r: 0%; }
  100% { --r: 160%; }
}

@keyframes ringGrow{
  0%   { width:18px; height:18px; filter:blur(0px); }
  100% { width:1600px; height:1600px; filter:blur(1.4px); }
}

/* =========================
   FLOATING HEARTS
   ========================= */
#hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
  overflow:hidden;
}

.heart{
  position:absolute;
  bottom:-40px;
  color: rgba(180, 205, 255, 0.95);
  opacity: .9;
  animation: floatUp linear forwards;
  text-shadow: 0 0 12px rgba(140,170,255,.6);
}

.heart::before{
  content:"‚ù§";
  display:block;
}

@keyframes floatUp{
  0%{
    transform: translateX(0) translateY(0) scale(1);
    opacity:0;
  }
  15%{ opacity:.9; }
  100%{
    transform: translateX(var(--drift)) translateY(-115vh) scale(1.25);
    opacity:0;
  }
}

/* =========================
   QUOTES LAYER
   ========================= */
#quotes{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:50;
}

.quote{
  position:absolute;
  width:min(240px, 38vw);
  font-size:14px;
  opacity:.85;
  color: rgba(230,240,255,0.92);
  text-shadow: 0 0 10px rgba(140,170,255,.45);
  line-height:1.25;
}

/* =========================
   FINAL PAGE (LOCKED LAYOUT)
   ========================= */
.finalBody{
  overflow:hidden;
}

/* Background image */
.finalBg{
  position:fixed;
  inset:0;
  z-index:20;
  background-image:url("../images/final.jpg");
  background-size:cover;
  background-position:center;
  filter: brightness(0.9) saturate(1.05);
}

.finalBg::after{
  content:"";
  position:absolute;
  inset:0;
  background: radial-gradient(circle at center,
    rgba(5,8,22,0.10) 0%,
    rgba(5,8,22,0.55) 60%,
    rgba(5,8,22,0.78) 100%);
}

.finalOverlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:120;
}

.finalCard{
  width:min(560px, 92vw);
  padding:26px 20px;
  border-radius:22px;
  background: rgba(255,255,255,0.10);
  backdrop-filter: blur(12px);
  box-shadow: 0 0 40px rgba(110,150,255,0.25);
}

.finalCard h2{
  margin:0;
  font-size:24px;
  line-height:1.2;
}

.finalBtns{
  margin-top:16px;
  display:flex;
  gap:14px;
  justify-content:center;
  flex-wrap:wrap;
}

.finalBtns button{
  width:min(220px, 80vw);
}

/* FX canvas does NOT block clicks */
#fxCanvas{
  position:fixed;
  inset:0;
  z-index:200;
  pointer-events:none;
}

/* Final message */
#finalMsg{
  position:fixed;
  left:50%;
  top:12vh;
  transform:translateX(-50%);
  z-index:300;
  opacity:0;
  font-size:22px;
  text-shadow:0 0 14px rgba(140,170,255,.6);
  transition: opacity .35s ease;
  pointer-events:none;
}
#finalMsg.show{ opacity:1; }

/* Shimmer wave */
.shimmer{
  position:fixed;
  inset:-30vh -30vw;
  z-index:230;
  pointer-events:none;
  background: radial-gradient(circle at 30% 50%,
    rgba(190,220,255,0.0) 0%,
    rgba(190,220,255,0.18) 25%,
    rgba(140,170,255,0.0) 60%);
  filter: blur(10px);
  animation: shimmerSweep 1.2s ease-out forwards;
}
@keyframes shimmerSweep{
  0%{ transform: translateX(-35vw); opacity:0; }
  10%{ opacity:1; }
  100%{ transform: translateX(35vw); opacity:0; }
}

/* Dim background when flower appears */
.dimBack{
  position:fixed;
  inset:0;
  z-index:260;
  pointer-events:none;
  background: radial-gradient(circle at center,
    rgba(5,8,22,0.10) 0%,
    rgba(5,8,22,0.55) 55%,
    rgba(5,8,22,0.80) 100%);
  opacity:0;
  animation: dimIn .9s ease forwards;
}
@keyframes dimIn{ to { opacity:1; } }

/* 3D Flower stage */
#flowerStage{
  position:fixed;
  inset:0;
  z-index:280;
  pointer-events:none;
}
#flowerStage.hidden{ display:none; }

#threeCanvas{
  width:100vw;
  height:100vh;
}

/* YES button lock-in */
#yesBtn.yesLocked{
  box-shadow: 0 0 20px rgba(150,190,255,.65), 0 0 55px rgba(140,160,255,.35);
  transform: scale(1.06);
}